#include<stdio.h>
#include<windows.h>
#include<math.h>
#define WIDE 200
#define HIGHT 100

void printxy(); //打印坐标轴
void contrll();  //初等函数菜单

void Constantfunctions();      //一次函数
void Powers();                 //幂函数
void Exponentialfunctions();   //指数函数
void Logarithms();             //对数函数
void Trigonometricfunctions(); //三角函数
void Hyperbolicfunctions();    //双曲线函数

void gotoxy(int x, int y)
{
    COORD pos;
    pos.X = x;
    pos.Y = y;
    SetConsoleCursorPosition(GetStdHandle(STD_OUTPUT_HANDLE), pos);
}

int main(void)
{
    system("mode con: cols=200 lines=100"); //设置窗口大小

    while(1)
{
    contrll();
}

    return 0;
}

void printxy()   //打印坐标轴
{

    for (int i = 0; i < WIDE; i++)
    {
        gotoxy(i, HIGHT/2);
        printf("_");

    }
    for (int i = 0; i < HIGHT; i++)
    {
        gotoxy(WIDE/2, i);
        printf("|");

    }
}

void contrll()
{
    puts("欢迎来到图形计算器1.0");
    puts("1.一次函数");
    puts("2.幂函数");
    puts("3.指数函数");
    puts("4.对数函数");
    puts("5.三角函数");
    puts("6.双曲线函数");
    printf("输入你要画出函数的类型对应的序号");
    int xu;
    scanf("%d",&xu);
    getchar();

    switch (xu)
    {
    case 1:
        Constantfunctions();
        break;
    case 2:
        Powers();
        break;
    case 3:
        Exponentialfunctions();
        break;
    case 4:
        Logarithms();
        break;
    case 5:
        //Trigonometricfunctions();
        break;
    case 6:
        //Hyperbolicfunctions();
        break;
    }


    }
void Constantfunctions()
    {
        puts("当前你使用的是一次函数");
        float k, b;
        printf("输入k值");
        scanf("%f", &k);
        getchar();
        printf("输入b值");
        scanf("%f", &b);
        getchar();
        puts("您已成功录入");
        Sleep(500);
        system("cls");

        printxy();
        int x=0,y;
            for (int i = -50; i < 50; i++)
        {
            y=-(k*i+b)+50;
            if(y>0 && y<100)
            {
                gotoxy(x, y);
                printf("*");
            }
            x += 2;
        }
        gotoxy(0,0);
        puts("按任意键继续");
        getchar();
        system("cls");
}

void Powers() //数字相差过大竖直补齐
{
    puts("当前模式幂函数");
    puts("输入次方数");
    float a;
    scanf("%f",&a);
    getchar();
    puts("您已成功录入");
    Sleep(500);
    system("cls");

    printxy();
    int x =0, y;
    for (int i = -50; i < 50; i++)
    {
        int fake=i;
        y=(-pow(fake,a)+50);
        if (y >= 0 && y <= 100)
        {
            gotoxy(x, y);
            printf("*");
        }
            x += 2;
    }
    gotoxy(0, 0);
    puts("按任意键继续");
    getchar();
    system("cls");
}

void Exponentialfunctions()
{
    puts("当前模式指数函数");
    puts("输入底数");
    float a;
    scanf("%f", &a);
    getchar();
    puts("您已成功录入");
    Sleep(500);
    system("cls");

    printxy();
    int x = 0, y;
    for (int i = -50; i < 50; i++)
    {
        int fake = i;
        y = (-pow(a,fake) + 50);
        if (y >= 0 && y <= 100)
        {
            gotoxy(x, y);
            printf("*");
        }
        x += 2;
    }
    gotoxy(0, 0);
    puts("按任意键继续");
    getchar();
    system("cls");
}

void Logarithms()
{
    puts("当前模式对数函数");
    puts("输入真数");
    float a;
    scanf("%f", &a);
    getchar();
    puts("您已成功录入");
    Sleep(500);
    system("cls");

    printxy();
    int x = 0, y;
    for (int i = -50; i < 50; i++)
    {
        int fake = i;
        y = (-frexp(a,&fake) + 50);
        if (y >= 0 && y <= 100)
        {
            gotoxy(x, y);
            printf("*");
        }
        x += 2;
    }
    gotoxy(0, 0);
    puts("按任意键继续");
    getchar();
    system("cls");
}
